@import './designSystem'

nav
  & + .music
    bottom: rem(55)
    transition: all .3s cubic-bezier(.5,0,.2,0)

    &.expented
      bottom: 0

.music
  position: fixed
  bottom: 0
  left: 0
  z-index: 77
  width: 100%

  &.night
    .background
      background-color: $hex-black

    .music-player
      .option
        .carplay
          .isCarplay
            svg
              path
                fill: $hex-light

            s
              background-color: $hex-light

      > .playlist
        background-color: $hex-dark

    .music-bar
      background-color: $hex-dark

      .thumbnail
        background-color: #4D335D

        svg
          path
            fill: $hex-dark

      .info
        strong, cite
          color: $hex-white

        cite
          opacity: .5

  .background
    transform: translate3d(0, 0, 0)
    transition: all .3s cubic-bezier(.5,0,.2,0)
    position: absolute
    overflow: hidden
    bottom: 0
    left: 0
    width: 100%
    height: 100vh
    opacity: 1

    &:not(.background-open)
      height: 0
      opacity: 0

    img
      width: 100%
      height: 100%
      object-fit: cover
      filter: blur(rem(100))
      transform: translate3d(0, 0, 0)

    .dummy
      display: block
      position: absolute
      top: 0
      left: 0
      width: 100%
      height: 100%
      background-color: rgba($hex-black, .7)

.music-bar
  transition: all .3s cubic-bezier(.5,0,.2,0)
  display: flex
  justify-content: space-between
  position: relative

  .pm &, .lm &
    transition: all .3s cubic-bezier(.5,0,.2,0)
    overflow: hidden
    padding: rem(12) rem(23)
    height: rem(67)

  .ld &, .pd &
    padding: rem(23)
    height: rem(93)

  &.musicbar-open
    background-color: transparent!important

    .pm &, .lm &, .pd.cp &, .ld.cp &
      overflow: hidden
      padding: 0
      height: 0

  .thumbnail
    .pm &, .lm &
      width: rem(43)
      height: rem(42)

    .ld &, .pd &
      width: rem(47)
      height: rem(47)

  .info
    display: flex
    flex-direction: column
    gap: rem(5)
    overflow: hidden

    strong, cite
      line-height: 1
      +ellipsis

    .pm &, .lm &
      strong
        font-size: rem(14)

      cite
        font-size: rem(12)

    .ld &, .pd &
      gap: rem(7)

      strong
        font-size: rem(16)

      cite
        font-size: rem(14)

  .started
    display: flex
    justify-content: center
    width: 100%

    button
      background-color: transparent
      text-align: left

    .music-info
      display: flex
      align-items: center

      .pm &, .lm &
        gap: rem(12)

      .ld &, .pd &
        gap: rem(7)

    .thumbnail
      display: flex
      justify-content: center
      align-items: center

      svg
        width: rem(27)
        height: rem(27)

  .music-container
    width: 100%

    button
      background-color: transparent

    .seektime
      position: absolute
      top: 0
      left: 0
      width: 100%
      height: rem(10)

      button
        display: flex
        justify-content: flex-start
        align-items: flex-start
        position: relative
        width: 100%
        height: rem(10)

        &:hover
          s
            height: rem(10)

          i, span
            height: rem(10)

          i
            min-width: rem(10)

          span
            border-radius: rem(10)
            width: rem(10)
            height: rem(10)

        s
          display: block
          background-color: rgba($hex-white, .5)
          width: 100%
          height: rem(2)

        i, span
          background-color: $hex-accent
          position: absolute
          top: 0
          height: rem(2)

        i
          left: 0
          min-width: rem(2)

          &.seeking
            background-color: $hex-light

        span
          border-radius: rem(2)
          width: rem(2)
          height: rem(2)

          strong
            position: absolute
            top: rem(-27)
            left: 50%
            background-color: $hex-accent
            transform: translateX(-50%)
            border-radius: rem(3)
            padding: rem(5) rem(7)
            font-size: rem(12)
            font-variation-settings: $fw-900
            line-height: 1
            color: $hex-white

    .songsong
      +row
      justify-content: space-between
      width: 100%

      .music-info, .music-playlist
        +row
        gap: rem(12)

      .music-info
        display: flex
        flex-wrap: nowrap
        padding-right: rem(139)
        width: auto

        +mq(minExtraLarge)
          width: 50%
          padding-right: rem(58)

        .info-container
          display: flex
          gap: rem(12)
          +coln
          position: relative
          width: auto
          overflow: hidden

          button
            position: absolute
            top: 0
            left: 0
            z-index: 7
            width: 100%
            height: 100%

            span
              +screen-reader-only

        .thumbnail, .repeat
          +coln

        .thumbnail, img
          width: rem(47)
          height: rem(47)

        .thumbnail
          display: flex
          justify-content: center
          align-items: center

          svg
            width: rem(27)
            height: rem(27)

          img
            display: block

        .info
          display: flex
          flex-direction: column
          justify-content: center
          gap: rem(5)
          max-width: calc(100vw - rem(304))

          +mq(minExtraLarge)
            gap: rem(7)
            max-width: calc(50vw - rem(292))

        .repeat
          display: flex
          align-items: center
          width: rem(28)

          button
            svg
              width: rem(27)
              height: rem(27)

              path:nth-of-type(2)
                fill: transparent

            &.all
              svg
                path:nth-of-type(2)
                  fill: $hex-light

            span
              +screen-reader-only

        .time
          display: flex
          align-items: center
          width: rem(100)

          dl
            display: flex
            gap: rem(5)

            div
              display: flex

              &:last-of-type
                gap: rem(5)

                &::before
                  content: '/'
                  font-size: rem(12)
                  color: rgba($hex-white, .5)

            dt
              +screen-reader-only

            dd
              font-size: rem(14)
              line-height: 1
              color: rgba($hex-white, .7)

      .music-controller
        transform: translateY(-50%)
        position: absolute
        top: 50%
        display: flex
        align-items: center
        width: auto

        +mq(maxLarge)
          right: rem(60)

        +mq(minExtraLarge)
          transform: translate(-50%, -50%)
          left: 50%

        button
          width: rem(43)
          height: rem(43)

          +mq(minExtraLarge)
            width: rem(52)
            height: rem(52)

          span
            +screen-reader-only

          svg
            width: rem(43)
            height: rem(43)

            +mq(minExtraLarge)
              width: rem(52)
              height: rem(52)

            path
              fill: $hex-accent

          &.side
            width: rem(27)
            height: rem(27)

            +mq(minExtraLarge)
              width: rem(32)
              height: rem(32)

            svg
              width: rem(27)
              height: rem(27)

              +mq(minExtraLarge)
                width: rem(32)
                height: rem(32)

              path
                fill: $hex-white

      .music-playlist
        display: flex
        align-items: center
        width: auto

        +mq(minExtraLarge)
          width: rem(162)

        .volume
          display: flex
          gap: rem(3)
          width: auto
          height: rem(20)

          button
            width: rem(20)
            height: rem(20)

            svg
              width: rem(20)
              height: rem(20)

            span
              +screen-reader-only

            &.muted
              svg
                path
                  fill: rgba($hex-white, .5)

          .level
            display: flex
            justify-content: flex-start
            align-items: center
            width: rem(100)

            s
              display: flex
              border-radius: rem(10)
              width: 100%
              height: rem(10)
              background-color: rgba($hex-white, .2)

              i
                border-radius: rem(10)
                width: 20%
                height: rem(10)
                background-color: $hex-white

        .playlist
          width: rem(20)
          height: rem(20)

          +mq(minExtraLarge)
            width: rem(27)
            height: rem(27)

          button, svg
            width: rem(20)
            height: rem(20)

            +mq(minExtraLarge)
              width: rem(27)
              height: rem(27)

          button
            &.visible
              svg
                path
                  fill: $hex-light

            span
              +screen-reader-only

.music-player
  transition: all .3s cubic-bezier(.5,0,.2,0)
  overflow: hidden
  position: absolute
  opacity: 1
  display: flex
  flex-direction: column
  width: 100%

  .pm &, .lm &, .pd.cp &, .ld.cp &
    bottom: 0
    height: 100dvh

  .ld &, .pd &
    bottom: rem(93)
    height: calc(100dvh - rem(93))

  &:not(.open)
    opacity: 0
    height: 0

    .pm &, .lm &
      bottom: rem(67)

    .ld &, .pd &
      bottom: rem(93)

  > h2
    +screen-reader-only

  button
    background-color: transparent

  .option
    display: flex
    justify-content: space-between
    position: relative
    z-index: 1
    width: 100%

    .pm &, .lm &
      padding: rem(23)

    .ld &, .pd &
      padding: rem(52)

    .carplay
      display: flex
      align-items: center

      button
        font-size: rem(16)
        line-height: 1
        text-decoration: underline

        +mq(maxLarge)
          display: flex
          gap: rem(3)

          &.isCarplay
            s
              i
                left: rem(25)

          span
            +screen-reader-only

          svg
            width: rem(25)
            height: rem(25)
            opacity: .5
            transition: all .3s cubic-bezier(.5,0,.2,0)

            path
              transition: all .3s cubic-bezier(.5,0,.2,0)

          s, i
            display: block
            border-radius: rem(25)
            height: rem(25)

          s
            position: relative
            width: rem(50)
            background-color: rgba($hex-white, .5)
            transition: all .3s cubic-bezier(.5,0,.2,0)

          i
            position: absolute
            top: 0
            left: 0
            width: rem(25)
            background-color: $hex-white
            transition: all .3s cubic-bezier(.5,0,.2,0)

    .musicNvideo
      position: absolute
      top: 50%
      left: 50%
      transform: translate(-50%, -50%)

      ul
        display: inline-flex
        background-color: rgba($hex-white, .2)
        border-radius: rem(32)
        height: rem(32)

        li
          display: inline-flex
          height: rem(32)

        button
          display: inline-flex
          align-items: center
          background-color: transparent
          border-radius: rem(32)
          padding: 0 rem(16)
          height: rem(32)
          font-size: rem(14)
          color: $hex-white

          &:not(.current)
            &.isMusic
              padding-right: rem(8)

            &.isVideo
              padding-left: rem(8)

          &.current
            background-color: $hex-accent

    .close, .close button, .close svg
      width: rem(32)
      height: rem(32)

    .close
      span
        +screen-reader-only

  .musicplayer-container
    display: flex
    flex-grow: 1

    .lm.cp &, .ld.cp &
      flex-direction: row-reverse

    .lm &, .ld &
      gap: rem(27)

    .lm &
      padding: 0 rem(32) rem(32)

    .ld &
      padding: rem(52)

    .pm &, .pd &
      flex-direction: column

    .pd &
      align-items: center
      padding-top: rem(32)

    .lm.cp &
      padding: 0 rem(32) rem(32)

    .pd.cp &, .pm.cp &
      flex-direction: column-reverse

    .pm.cp &
      justify-content: space-between

    > div
      .pd &, .ld &
        +col

    .mp-visual
      position: relative

      .lm &, .pm &
        display: flex

      .lm &
        align-items: center
        width: calc(100dvh - rem(124))
        height: calc(100dvh - rem(124))

      .pm &
        justify-content: center
        padding: rem(23) 0
        height: calc(100dvh - rem(437))

      .pd &
        aspect-ratio: 1 / 1
        width: calc(100vw - rem(64))
        height: auto
        flex: none

      > img, > span + div
        .lm &
          width: calc(100dvh - rem(124))
          height: calc(100dvh - rem(124))

        .pm &
          width: calc(100% - rem(46))
          height: auto

        .pd &, .ld &
          position: absolute
          top: 50%
          left: 50%
          transform: translate(-50%, -50%)

        .pd &
          width: 100%
          height: 100%

        .ld &
          width: 90%
          height: 90%

      > img
        display: block
        object-fit: contain

        .lm &
          object-position: 0 0

        .ld &
          max-width: rem(480)

        .ld.cp &
          max-width: none
          width: 100%
          height: 100%

        & + div
          +screen-reader-only
          z-index: -1

      > span
        +screen-reader-only

        + div
          display: flex
          align-items: center

          iframe
            aspect-ratio: 1920 / 1080
            width: 100%
            height: auto

      .video-controller
        position: absolute
        top: 0
        left: 0
        display: flex
        justify-content: center
        align-items: center
        width: 100%
        height: 100%

        > button
          position: relative
          aspect-ratio: 1920 / 1080
          width: 100%
          height: auto

          &.isPlaying
            .dummy, s
              opacity: 0

            &:hover
              .dummy, s
                opacity: 1

          &:hover
            s
              opacity: 1
              background-color: $hex-white

              svg
                path
                  fill: $hex-accent

          .dummy
            position: absolute
            top: 0
            left: 0
            width: 100%
            height: 100%
            width: 100%
            height: 100%
            background-color: rgba($hex-black, .7)

          s
            display: flex
            justify-content: center
            align-items: center
            position: absolute
            top: 50%
            left: 50%
            transform: translate(-50%, -50%)
            border-radius: rem(52)
            width: rem(52)
            height: rem(52)
            background-color: $hex-accent
            transition: all .3s cubic-bezier(.5,0,.2,0)

            svg
              width: rem(38)
              height: rem(38)

              path
                fill: $hex-white
                transition: all .3s cubic-bezier(.5,0,.2,0)

          span
            +screen-reader-only

    .mp-info
      display: flex
      flex-direction: column
      justify-content: center
      gap: rem(23)

      .lm &
        justify-content: flex-start
        +col
        position: relative

      .pm &
        padding: 0 rem(23)

      .ld &
        justify-content: flex-start
        position: relative

      .pd &
        align-items: flex-start
        justify-content: flex-start
        width: 100%
        padding: rem(52)

      .primary
        dt
          +screen-reader-only

        div:nth-of-type(1)
          dd
            font-variation-settings: $fw-950

            .lm &, .pm &
              font-size: rem(24)

            .ld &, .pd &
              font-size: rem(64)

        div:nth-of-type(2)
          padding: rem(5) 0 rem(37)

          .lm &, .pm &
            padding-bottom: rem(23)

          dd
            line-height: 1

            .lm &, .pm &
              font-size: rem(16)

            .ld &, .pd &
              font-size: rem(36)

        div:nth-of-type(3)
          dd
            font-size: rem(32)

            .lm &, .pm &
              font-size: rem(14)

            .ld &, .pd &
              font-size: rem(32)

      .secondary
        display: flex
        flex-direction: column
        gap: rem(12)

        .lm &, .pm &
          gap: rem(7)

        .lm.cp &, .lm &
          +screen-reader-only

        div
          +row
          gap: rem(17)

          dt, dd
            font-size: rem(24)

            .lm &, .pm &
              font-size: rem(14)

            .ld &, .pd &
              font-size: rem(24)

          dt
            width: rem(102)

          dd
            +col

      .controller-container
        position: absolute
        bottom: 0
        left: 0
        display: flex
        justify-content: space-between
        width: 100%

        .cp &
          flex-direction: row-reverse

        .pm &
          padding: rem(23) rem(23) 0

        .lm &, .ld &
          padding-top: rem(23)

        .lm.cp &, .ld.cp &
          padding-top: rem(23)

        .pd.cp &
          bottom: calc(100vw - rem(64))
          padding: rem(52)

        .pm.cp &
          bottom: calc(100vh - rem(437))
          padding: rem(23) rem(23) 0
          flex-direction: row-reverse

        button
          .lm &
            width: rem(82)

          .lm &, .pm &
            height: rem(82)

          .ld &, .pd &
            height: rem(123)

        div:not(.seektime)
          span
            +screen-reader-only

        .seektime
          position: absolute
          top: 0
          left: 0
          width: 100%
          height: rem(10)

          .pm &
            padding: 0 rem(23)

          .pd.cp &
            padding: 0 rem(52)

          button
            display: flex
            justify-content: flex-start
            align-items: center
            position: relative
            padding: 0 !important
            width: 100%
            height: rem(10)

            s
              display: block
              background-color: rgba($hex-white, .5)
              border-radius: rem(2)
              width: 100%
              height: rem(2)

            i, span
              background-color: $hex-accent
              position: absolute
              top: 0
              height: rem(2)

            i
              top: 50%
              left: 0
              transform: translateY(-50%)
              min-width: rem(2)

              &.seeking
                background-color: $hex-light

            span
              border-radius: rem(10)
              width: rem(10)
              height: rem(10)

              strong
                position: absolute
                top: rem(-27)
                left: 50%
                background-color: $hex-accent
                transform: translateX(-50%)
                border-radius: rem(3)
                padding: rem(5) rem(7)
                font-size: rem(12)
                font-variation-settings: $fw-900
                line-height: 1
                color: $hex-white

        .repeat, .playlist
          .pm &, .lm &
            width: rem(62)

          .ld &, .pd &
            width: rem(123)

        .repeat, .playlist, .controller
          button
            .pm &, .lm &
              width: rem(62)
              height: rem(86)

            .ld &, .pd &
              width: rem(123)
              height: rem(123)

        .repeat
          display: flex
          align-items: center

          .pm &, .lm &
            width: rem(82)

          .ld &, .pd &
            width: rem(123)

          button
            .pm &, .lm &
              text-align: left

            .pm.cp &, .lm.cp &
              text-align: right

            svg
              .pm &, .lm &
                width: rem(27)
                height: rem(27)

              .ld &, .pd &
                width: rem(72)
                height: rem(72)

              path:nth-of-type(2)
                fill: transparent

            &.all
              svg
                path:nth-of-type(2)
                  fill: $hex-light

        .controller
          display: flex
          align-items: center

          button
            svg
              .pm &, .lm &
                width: rem(82)
                height: rem(82)

              .ld &, .pd &
                width: rem(72)
                height: rem(72)

              path
                fill: $hex-accent

            &:not(.side)
              .pm &, .lm &
                width: rem(82)

                svg
                  width: rem(82)
                  height: rem(82)

              .ld &, .pd &
                width: rem(123)

                svg
                  width: rem(123)
                  height: rem(123)

            &.side
              svg
                .pm &, .lm &
                  width: rem(37)
                  height: rem(37)

                .ld &, .pd &
                  width: rem(72)
                  height: rem(72)

                path
                  fill: $hex-white

        .playlist
          .pm &, .lm &
            width: rem(82)

          .ld &, .pd &
            width: rem(123)

          button
            .pm &, .lm &
              text-align: right

            .pm.cp &, .lm.cp &
              text-align: left

            svg
              .pm &, .lm &
                width: rem(27)
                height: rem(27)

              .ld &, .pd &
                width: rem(72)
                height: rem(72)

          button
            &.visible
              svg
                path
                  fill: $hex-light

  > .playlist
    display: flex
    flex-direction: column
    gap: rem(10)
    position: absolute
    right: 0
    z-index: 7
    padding: rem(27) rem(23)
    width: 100%
    max-width: rem(370)

    .cp &
      right: auto
      left: 0

    .lm &, .pm &
      top: rem(78)
      height: calc(100% - rem(78))

    .ld &, .pd &
      top: rem(136)
      height: 100%

    .pm.cp &
      height: calc(100% - rem(78))

    .ld.cp &, .pd.cp &
      height: calc(100dvh - rem(136))

    .headline
      display: flex
      justify-content: space-between
      align-items: center

      h2
        font-size: rem(16)
        line-height: 1

      button, svg
        width: rem(20)
        height: rem(20)

      span
        +screen-reader-only

    .select
      display: flex
      gap: rem(10)
      position: relative

      button
        span
          +screen-reader-only

      .selectbox, .view, .delete, ul
        border-radius: rem(3)

      .selectbox, .view, .delete
        height: rem(28)

      .selectbox
        +col
        overflow: hidden
        border: 1px solid rgba($hex-white, .2)
        padding: 0 rem(7)
        height: rem(28)
        text-align: left

        &.selected
          border: 1px solid $hex-white

        strong
          font-size: rem(14)
          +ellipsis

      ul
        position: absolute
        top: 0
        left: 0
        z-index: 7
        width: rem(248)
        background-color: $hex-white

        li
          &::before
            content: ''
            display: block
            width: 100%
            height: 1px
            background-color: $hex-dark

          &:first-of-type::before
            display: none

          button
            width: 100%
            padding: rem(7) rem(16)
            font-size: rem(14)
            text-align: left
            color: $hex-black

            strong
              font-variation-settings: $fw-900
              color: $hex-accent

      .view, .delete
        display: flex
        justify-content: center
        align-items: center
        width: rem(28)

        svg
          width: rem(20)
          height: rem(20)

      .view
        border: 1px solid $hex-white

        &:disabled
          border: 1px solid rgba($hex-white, .2)

      .delete
        border: 1px solid $hex-accent
        background-color: $hex-accent

        &:disabled
          border: 1px solid rgba($hex-white, .2)
          background-color: rgba($hex-white, .2)

    .items
      padding-top: rem(14)

      ul
        display: flex
        flex-direction: column
        gap: rem(7)

        li
          +row
          gap: rem(12)
          position: relative

          .thumbnail
            width: rem(47)
            height: rem(47)
            position: relative

            img
              display: block
              width: rem(47)
              height: rem(47)

            i
              position: absolute
              top: 0
              left: 0
              width: 100%
              height: 100%
              display: flex
              justify-content: center
              align-items: center

              .night &
                background-color: rgba($hex-light, .7)

              svg
                width: rem(27)
                height: rem(27)

                .night &
                  path
                    fill: rgba($hex-black, .7)

              span
                +screen-reader-only

          .info
            +col
            display: flex
            flex-direction: column
            justify-content: center
            gap: rem(7)
            overflow: hidden

            strong, cite
              +ellipsis
              line-height: 1

            strong
              font-size: rem(16)

            cite
              font-size: rem(14)
              color: rgba($hex-white, .5)

          button
            position: absolute
            top: 0
            left: 0
            width: 100%
            height: 100%

            span
              +screen-reader-only
